# PRD文档分析
## 功能模块
### 用户模块
**用户角色**
- 运营人员：新增、编辑、提交审核
- 管理人员：上线、下线、审批通过，新增用户，管理人员在逻辑上拥有所有权限
- 登录
- 找回密码。通过redis发送验证码
- 登录过后的Token返回，在商品端做权限校验
### 商品模块

- 商品列表查询、条件查询、商品预览
- 单个商品信息详细查询、商品信息预览
- 新增商品、编辑商品（保存为草稿、提交为商品）

- 商品提交审批

    - 提交审核后，商品不可编辑，且编辑按钮不可见
    - 审批后，无论审批是否通过，商品都可以进行编辑，但是编辑后需要重新审核
- 商品审批通过
- 商品上线、下线、批量操作（管理员权限）
- 操作商品记录查询，操作记录的保存
- 创建人移交运营权限
- 创建的商品的代理人
- 商品大盘数据的展示，兑换量、销量、兑换方式
- 消息通知
- 管理员新增用户并授权

注意点：

- 运营人员可以查看所以商品，但是只能操作自己创建的商品
- 管理员具有所有权限
- 商品审批时会有审批备注
### 库表设计
**商品模块**
- 商品表
- 草稿表
- 商品类目表
- 商品操作表
- 商品代理表（待留）
- 商品兑换表（待留）

**用户模块**
- 用户表
- 角色用户表
- 角色表
- 角色权限表
- 权限表

### 课程学习技术栈

- sofaboot：应用框架搭建，使用标准七层模块
- sofaRPC/dubbo/nacos：远程调用（代理人和管理人创建）、配置中心
- 消息和缓存：redis(商品类别的缓存)，rocketMq(上线时间)
- 分布式事务seata：
- serverless/前后端联调

### 开发进度：

- 21：
   - 服务骨架（统一异常处理、枚举值统一、统一返回结果、依赖统一）
   - Docker环境搭建（开源大学堂的环境）
   - 数据库设计、状态机、ER图、系分、配置中心跑通
- 22：
   - 商品查询、条件查询、商品预览、登录（未涉及权限）（王明森）
   - 商品创建、草稿创建、操作记录的保存和查询、商品类别查询（吴丰宁）
   - 商品状态的变化（草稿、未审核、审核中、审核通过、上线、下线），利用设计模式做一层过滤（杨云翔）
- 23、
   - RPC实现代理人管理、设置代理人、管理人移交（吴丰宁）
   - 延时队列实现上下线，根据库存判断上下线（杨云翔）
   - 引入redis缓存、找回密码（王明森）
- 24/25、消息通知、新增用户、整个系统的权限管理、单元测试、功能测试



